{
    "type": "DashboardV2SyncDefinition",
    "name": "View Based - Data Volume Tiers Investigation Console",
    "description": "",
    "title": "View Based - Data Volume Tiers Investigation Console",
    "rootPanel": null,
    "theme": "Light",
    "topologyLabelMap": {
        "data": {}
    },
    "refreshInterval": 0,
    "timeRange": {
        "type": "BeginBoundedTimeRange",
        "from": {
            "type": "RelativeTimeRangeBoundary",
            "relativeTime": "-1d"
        },
        "to": null
    },
    "layout": {
        "layoutType": "Grid",
        "layoutStructures": [
            {
                "key": "panel6DA0287589046847",
                "structure": "{\"height\":12,\"width\":24,\"x\":0,\"y\":8}"
            },
            {
                "key": "panel98BD121FB45F6943",
                "structure": "{\"height\":8,\"width\":6,\"x\":18,\"y\":0}"
            },
            {
                "key": "panel2C01C45CA2B6294C",
                "structure": "{\"height\":10,\"width\":12,\"x\":12,\"y\":22}"
            },
            {
                "key": "panelPANE-A6A877CF967A7B44",
                "structure": "{\"height\":8,\"width\":12,\"x\":0,\"y\":0}"
            },
            {
                "key": "panelE81B48D8A9AA6844",
                "structure": "{\"height\":8,\"width\":6,\"x\":12,\"y\":0}"
            },
            {
                "key": "panel96475C979583F84D",
                "structure": "{\"height\":10,\"width\":12,\"x\":0,\"y\":22}"
            },
            {
                "key": "panel9C3CF35A941AA94D",
                "structure": "{\"height\":2,\"width\":24,\"x\":0,\"y\":20}"
            }
        ]
    },
    "panels": [
        {
            "id": null,
            "key": "panel6DA0287589046847",
            "title": "Tabular View - Top Sources Other",
            "visualSettings": "{\"title\":{\"fontSize\":14},\"axes\":{\"axisX\":{\"titleFontSize\":12,\"labelFontSize\":12},\"axisY\":{\"titleFontSize\":12,\"labelFontSize\":12}},\"series\":{},\"general\":{\"type\":\"table\",\"displayType\":\"default\",\"paginationPageSize\":100,\"fontSize\":12,\"mode\":\"distribution\",\"decimals\":1},\"legend\":{\"enabled\":false}}",
            "keepVisualSettingsConsistentWithParent": true,
            "panelType": "SumoSearchPanel",
            "queries": [
                {
                    "queryString": "//(_index=sumologic_volume) _sourcecategory={{view}}_and_tier_volume\n//| parse regex \"\\{\\\"field\\\":\\\"(?<value>[^\\\"]+)\\\",\\\"dataTier\\\":\\\"(?<dataTier>[^\\\"]+)\\\",\\\"sizeInBytes\\\":(?<sizeInBytes>[^\\\"]+),\\\"count\\\":(?<count>[^\\\"]+)\\},\" multi\n(_view=data_volume_custom_tiers_sourcehost or  _view=data_volume_custom_tiers_other)\ndimension ={{view}}\n| where tolowercase(value) matches tolowercase(\"{{value_filter}}\")\n| where datatier matches \"{{tier_filter}}\"\n// remove long categories\n| bytes /1024/1024/1024 as gbytes \n| sum(events) as  events,sum(gbytes) as gbytes by datatier, value,dimension\n| if (length(value) > {{max_chrs}},concat(substring(value,0,{{max_chrs}}),\"...\"),value) as value \n\n| count as rows,sum(events) as events,sum(gbytes) as gbytes by datatier, value,dimension\n| total gbytes as tgb \n| total gbytes as tgbs by value\n| tgbs / tgb as fraction\n\n// *** THIS LINE rolls up small sources into 'other' ***\n//| if(( fraction * 100 )> {{other_pct}},value,\"other\" ) as value\n| fraction * 100 as percent\n//| bytes / 1024/1024/1024 as gb\n| if (datatier=\"Frequent\",gbytes * 9,gbytes * 20) as credits\n| if (datatier=\"Infrequent\",gbytes * .4,credits) as credits\n| if (datatier=\"CSE\",gbytes * 25,credits) as credits\n\n|sum(credits) as credits,  sum(events) as events,sum(gbytes) as gbytes, sum(percent) as percent by datatier,dimension,value\n| credits/gbytes as %\"cr/gb\"\n| sort credits",
                    "queryType": "Logs",
                    "queryKey": "A",
                    "metricsQueryMode": null,
                    "metricsQueryData": null,
                    "tracesQueryData": null,
                    "parseMode": "Auto",
                    "timeSource": "Message"
                }
            ],
            "description": "",
            "timeRange": null,
            "coloringRules": null,
            "linkedDashboards": []
        },
        {
            "id": null,
            "key": "panel98BD121FB45F6943",
            "title": "Total {{graphs_by}} By {{view}}",
            "visualSettings": "{\"title\":{\"fontSize\":14},\"axes\":{\"axisX\":{\"titleFontSize\":12,\"labelFontSize\":12},\"axisY\":{\"titleFontSize\":12,\"labelFontSize\":12}},\"series\":{},\"legend\":{\"enabled\":false},\"general\":{\"type\":\"pie\",\"displayType\":\"default\",\"fillOpacity\":1,\"startAngle\":270,\"innerRadius\":\"30%\",\"maxNumOfSlices\":10,\"mode\":\"distribution\"}}",
            "keepVisualSettingsConsistentWithParent": true,
            "panelType": "SumoSearchPanel",
            "queries": [
                {
                    "queryString": "//(_index=sumologic_volume) _sourcecategory={{view}}_and_tier_volume\n//| parse regex \"\\{\\\"field\\\":\\\"(?<value>[^\\\"]+)\\\",\\\"dataTier\\\":\\\"(?<dataTier>[^\\\"]+)\\\",\\\"sizeInBytes\\\":(?<sizeInBytes>[^\\\"]+),\\\"count\\\":(?<count>[^\\\"]+)\\},\" multi\n(_view=data_volume_custom_tiers_sourcehost or  _view=data_volume_custom_tiers_other)\ndimension ={{view}}\n| where tolowercase(value) matches tolowercase(\"{{value_filter}}\")\n| where datatier matches \"{{tier_filter}}\"\n| bytes /1024/1024/1024 as gbytes \n| if (length(value) > {{max_chrs}},concat(substring(value,0,{{max_chrs}}),\"...\"),value) as value \n| sum(events) as events,sum(gbytes) as gbytes by value,dataTier\n| total gbytes as tgb \n| total gbytes as tgbs by value\n| tgbs / tgb as fraction\n\n| fraction * 100 as percent\n| if (datatier=\"Frequent\",gbytes * 9,gbytes * 20) as credits\n| if (datatier=\"Infrequent\",gbytes * .4,credits) as credits\n| if (datatier=\"CSE\",gbytes * 25,credits) as credits\n\n//|sum(credits) as credits,count as rows, sum(gbytes) as gbytes by datatier,value\n\n| sum({{graphs_by}}) as total by value | sort total\n\n",
                    "queryType": "Logs",
                    "queryKey": "A",
                    "metricsQueryMode": null,
                    "metricsQueryData": null,
                    "tracesQueryData": null,
                    "parseMode": "Auto",
                    "timeSource": "Message"
                }
            ],
            "description": "",
            "timeRange": null,
            "coloringRules": null,
            "linkedDashboards": []
        },
        {
            "id": null,
            "key": "panel2C01C45CA2B6294C",
            "title": "{{graphs_by}} For Ingest By Tier Over Time",
            "visualSettings": "{\"title\":{\"fontSize\":14},\"axes\":{\"axisX\":{\"title\":\"\",\"titleFontSize\":10,\"labelFontSize\":10},\"axisY\":{\"title\":\"\",\"titleFontSize\":10,\"titleFontFamily\":\"Lab Grotesque Medium, \\\"Arial Bold\\\", sans-serif\",\"titleFontColor\":\"#6D8DA6\",\"titleFontWeight\":\"normal\",\"labelFontColor\":\"#6D8DA6\",\"lineColor\":\"#DDE4E9\",\"stripLines\":null,\"gridThickness\":1,\"lineThickness\":0,\"labelFontSize\":10,\"tickColor\":\"#E6EAED\",\"logarithmic\":false,\"linear\":false,\"unit\":{\"value\":\"\",\"isCustom\":false},\"gridColor\":\"#E6EAED\",\"labelFontFamily\":\"Lab Grotesque Regular, \\\"Arial\\\", sans-serif\",\"labelFontWeight\":\"normal\"},\"axisY2\":{\"title\":\"\",\"titleFontSize\":10,\"titleFontFamily\":\"Lab Grotesque Medium, \\\"Arial Bold\\\", sans-serif\",\"titleFontColor\":\"#6D8DA6\",\"titleFontWeight\":\"normal\",\"labelFontColor\":\"#6D8DA6\",\"lineColor\":\"#DDE4E9\",\"stripLines\":null,\"lineThickness\":0,\"labelFontSize\":10,\"tickColor\":\"#E6EAED\",\"logarithmic\":false,\"linear\":false,\"unit\":{\"value\":\"\",\"isCustom\":false},\"gridThickness\":0,\"valueFormatString\":\"\",\"gridColor\":\"#E6EAED\",\"labelFontFamily\":\"Lab Grotesque Regular, \\\"Arial\\\", sans-serif\",\"labelFontWeight\":\"normal\"}},\"legend\":{\"enabled\":true,\"verticalAlign\":\"bottom\",\"fontSize\":12,\"maxHeight\":50,\"showAsTable\":false,\"wrap\":true},\"series\":{},\"general\":{\"type\":\"column\",\"displayType\":\"stacked\",\"fillOpacity\":1,\"mode\":\"timeSeries\"},\"color\":{\"family\":\"Colorsafe\"},\"overrides\":[]}",
            "keepVisualSettingsConsistentWithParent": true,
            "panelType": "SumoSearchPanel",
            "queries": [
                {
                    "queryString": "//(_index=sumologic_volume) _sourcecategory={{view}}_and_tier_volume\n//| parse regex \"\\{\\\"field\\\":\\\"(?<value>[^\\\"]+)\\\",\\\"dataTier\\\":\\\"(?<dataTier>[^\\\"]+)\\\",\\\"sizeInBytes\\\":(?<sizeInBytes>[^\\\"]+),\\\"count\\\":(?<count>[^\\\"]+)\\},\" multi\n(_view=data_volume_custom_tiers_sourcehost or  _view=data_volume_custom_tiers_other)\ndimension ={{view}}\n| where tolowercase(value) matches tolowercase(\"{{value_filter}}\")\n| where datatier matches \"{{tier_filter}}\"\n| timeslice by {{timeslice}}\n| bytes / 1024/1024/1024 as gbytes\n| sum(events) as events,sum(gbytes) as gbytes by datatier,_timeslice\n\n| if (datatier=\"Frequent\",gbytes * 9,gbytes * 20) as credits\n| if (datatier=\"Infrequent\",gbytes * .4,credits) as credits\n| if (datatier=\"CSE\",gbytes * 25,credits) as credits\n\n| sum({{graphs_by}}) as series by datatier,_timeslice | transpose row _timeslice column datatier\n\n",
                    "queryType": "Logs",
                    "queryKey": "A",
                    "metricsQueryMode": null,
                    "metricsQueryData": null,
                    "tracesQueryData": null,
                    "parseMode": "Auto",
                    "timeSource": "Message"
                }
            ],
            "description": "",
            "timeRange": null,
            "coloringRules": null,
            "linkedDashboards": []
        },
        {
            "id": null,
            "key": "panelPANE-A6A877CF967A7B44",
            "title": "About",
            "visualSettings": "{\"general\":{\"mode\":\"TextPanel\",\"type\":\"text\",\"displayType\":\"default\"},\"title\":{\"fontSize\":14},\"text\":{\"format\":\"markdownV2\",\"fontSize\":12},\"series\":{},\"legend\":{\"enabled\":false}}",
            "keepVisualSettingsConsistentWithParent": true,
            "panelType": "TextPanel",
            "text": "This dashboard uses the a custom scheduled view and a preaggregated summary of the data volume with tier index for example: ```_view=data_volume_custom_tiers_*``` instead of: ```_index=sumologic_volume _sourcecategory=sourcecategory_and_tier_volume```.\n\nAs a result queries will execute very fast and can be run quickly over long time ranges.\n\nThe dashboard shows ingestion gb, events and estimated ingest credits by category, tier and so on.\n\nAvailable filters are:\n- view: such as sourcecategory,view,collector,sourcehost. There is a volume for each sumo metadata.\n- timeslice: timeslice value for some graphs such as 1m 15m 1h\n- value_filter: apply a where matches filter to value names\n- tier_filter: use * or choose a single tier\n- max _chrs: truncates the value to a shorter length to remove unique strings\n\nExample Use Cases:\n- Recent high level ingest/credits use: set timeslice range to 24h and timeslice to 15m. You can then view last days ingest /credits use by any single 'view' dimension such as sourcecategory or sourcehost\n- See impact of changes to data tiering partition rules: Set time range to -3h and timeslice to 1m, then choose a relevant dimension such as view for partitions, or sourcecategory. You should be able to see changes you have made after 10-15m to tiering configurations as data streams into a new partition/tier and credits consumption rates change.\n\n"
        },
        {
            "id": null,
            "key": "panelE81B48D8A9AA6844",
            "title": "Total Credits By Tier",
            "visualSettings": "{\"title\":{\"fontSize\":14},\"general\":{\"type\":\"pie\",\"displayType\":\"default\",\"fillOpacity\":1,\"startAngle\":270,\"innerRadius\":\"30%\",\"maxNumOfSlices\":10,\"mode\":\"distribution\"},\"axes\":{\"axisX\":{\"titleFontSize\":12,\"labelFontSize\":12},\"axisY\":{\"titleFontSize\":12,\"labelFontSize\":12}},\"series\":{}}",
            "keepVisualSettingsConsistentWithParent": true,
            "panelType": "SumoSearchPanel",
            "queries": [
                {
                    "queryString": "//(_index=sumologic_volume) _sourcecategory={{view}}_and_tier_volume\n//| parse regex \"\\{\\\"field\\\":\\\"(?<value>[^\\\"]+)\\\",\\\"dataTier\\\":\\\"(?<dataTier>[^\\\"]+)\\\",\\\"sizeInBytes\\\":(?<sizeInBytes>[^\\\"]+),\\\"count\\\":(?<count>[^\\\"]+)\\},\" multi\n(_view=data_volume_custom_tiers_sourcehost or  _view=data_volume_custom_tiers_other)\ndimension ={{view}}\n| where tolowercase(value) matches tolowercase(\"{{value_filter}}\")\n| where datatier matches \"{{tier_filter}}\"\n| timeslice by {{timeslice}}\n//| sum(sizeinbytes) as bytes by datatier, value\n| sum(bytes) as bytes by datatier, value,_timeslice\n| bytes / 1024/1024/1024 as gbytes\n| if (datatier=\"Frequent\",gbytes * 9,gbytes * 20) as credits\n| if (datatier=\"Infrequent\",gbytes * .4,credits) as credits\n| if (datatier=\"CSE\",gbytes * 25,credits) as credits\n\n| sum(credits) as credits by datatier\n",
                    "queryType": "Logs",
                    "queryKey": "A",
                    "metricsQueryMode": null,
                    "metricsQueryData": null,
                    "tracesQueryData": null,
                    "parseMode": "Auto",
                    "timeSource": "Message"
                }
            ],
            "description": "",
            "timeRange": null,
            "coloringRules": null,
            "linkedDashboards": []
        },
        {
            "id": null,
            "key": "panel96475C979583F84D",
            "title": "{{graphs_by}} over time by {{view}}",
            "visualSettings": "{\"title\":{\"fontSize\":14},\"axes\":{\"axisX\":{\"title\":\"\",\"titleFontSize\":10,\"labelFontSize\":10},\"axisY\":{\"title\":\"\",\"titleFontSize\":10,\"titleFontFamily\":\"Lab Grotesque Medium, \\\"Arial Bold\\\", sans-serif\",\"titleFontColor\":\"#6D8DA6\",\"titleFontWeight\":\"normal\",\"labelFontColor\":\"#6D8DA6\",\"lineColor\":\"#DDE4E9\",\"stripLines\":null,\"gridThickness\":1,\"lineThickness\":0,\"labelFontSize\":10,\"tickColor\":\"#E6EAED\",\"logarithmic\":false,\"linear\":false,\"unit\":{\"value\":\"\",\"isCustom\":false},\"gridColor\":\"#E6EAED\",\"labelFontFamily\":\"Lab Grotesque Regular, \\\"Arial\\\", sans-serif\",\"labelFontWeight\":\"normal\",\"minimum\":0},\"axisY2\":{\"title\":\"\",\"titleFontSize\":10,\"titleFontFamily\":\"Lab Grotesque Medium, \\\"Arial Bold\\\", sans-serif\",\"titleFontColor\":\"#6D8DA6\",\"titleFontWeight\":\"normal\",\"labelFontColor\":\"#6D8DA6\",\"lineColor\":\"#DDE4E9\",\"stripLines\":null,\"lineThickness\":0,\"labelFontSize\":10,\"tickColor\":\"#E6EAED\",\"logarithmic\":false,\"linear\":false,\"unit\":{\"value\":\"GB\",\"isCustom\":false},\"gridThickness\":0,\"valueFormatString\":\"\",\"gridColor\":\"#E6EAED\",\"labelFontFamily\":\"Lab Grotesque Regular, \\\"Arial\\\", sans-serif\",\"labelFontWeight\":\"normal\"}},\"legend\":{\"enabled\":true,\"verticalAlign\":\"bottom\",\"fontSize\":12,\"maxHeight\":50,\"showAsTable\":false,\"wrap\":true},\"series\":{},\"general\":{\"type\":\"column\",\"displayType\":\"stacked\",\"fillOpacity\":1,\"mode\":\"timeSeries\"},\"color\":{\"family\":\"Categorical Default\"},\"xy\":{\"xDimension\":[],\"yDimension\":[],\"zDimension\":[]},\"overrides\":[]}",
            "keepVisualSettingsConsistentWithParent": true,
            "panelType": "SumoSearchPanel",
            "queries": [
                {
                    "queryString": "//(_index=sumologic_volume) _sourcecategory={{view}}_and_tier_volume\n//| parse regex \"\\{\\\"field\\\":\\\"(?<value>[^\\\"]+)\\\",\\\"dataTier\\\":\\\"(?<dataTier>[^\\\"]+)\\\",\\\"sizeInBytes\\\":(?<sizeInBytes>[^\\\"]+),\\\"count\\\":(?<count>[^\\\"]+)\\},\" multi\n(_view=data_volume_custom_tiers_sourcehost or  _view=data_volume_custom_tiers_other)\ndimension ={{view}}\n| where tolowercase(value) matches tolowercase(\"{{value_filter}}\")\n| where datatier matches \"{{tier_filter}}\"\n| if (length(value) > {{max_chrs}},concat(substring(value,0,{{max_chrs}}),\"...\"),value) as value \n\n//| tolong(_timeslice) as _messagetime\n| timeslice by {{timeslice}}\n| bytes / 1024/1024/1024 as gbytes\n| sum(gbytes) as gbytes by datatier, value,dimension,_timeslice\n\n| if (datatier=\"Frequent\",gbytes * 9,gbytes * 20) as credits\n| if (datatier=\"Infrequent\",gbytes * .4,credits) as credits\n| if (datatier=\"CSE\",gbytes * 25,credits) as credits\n\n| sum({{graphs_by}}) as series by _timeslice,value \n| transpose row _timeslice column value\n",
                    "queryType": "Logs",
                    "queryKey": "A",
                    "metricsQueryMode": null,
                    "metricsQueryData": null,
                    "tracesQueryData": null,
                    "parseMode": "Auto",
                    "timeSource": "Message"
                }
            ],
            "description": "",
            "timeRange": null,
            "coloringRules": null,
            "linkedDashboards": []
        },
        {
            "id": null,
            "key": "panel9C3CF35A941AA94D",
            "title": "Graphs",
            "visualSettings": "{\"general\":{\"mode\":\"TextPanel\",\"type\":\"text\",\"displayType\":\"default\"},\"title\":{\"fontSize\":14},\"text\":{\"format\":\"markdownV2\",\"fontSize\":12},\"series\":{},\"legend\":{\"enabled\":false}}",
            "keepVisualSettingsConsistentWithParent": true,
            "panelType": "TextPanel",
            "text": "These graphs show either ingest credits or gbytes based on the value of the 'graphs_by' parameter which is set to: {{graphs_by}}"
        }
    ],
    "variables": [
        {
            "id": null,
            "name": "view",
            "displayName": "view",
            "defaultValue": "sourcecategory",
            "sourceDefinition": {
                "variableSourceType": "LogQueryVariableSourceDefinition",
                "query": "_view=data_volume_custom_tiers_* | count by dimension",
                "field": "dimension"
            },
            "allowMultiSelect": false,
            "includeAllOption": false,
            "hideFromUI": false,
            "valueType": "Any"
        },
        {
            "id": null,
            "name": "timeslice",
            "displayName": "timeslice",
            "defaultValue": "15m",
            "sourceDefinition": {
                "variableSourceType": "CsvVariableSourceDefinition",
                "values": "5m,15m,1h,6h,24h"
            },
            "allowMultiSelect": false,
            "includeAllOption": false,
            "hideFromUI": false,
            "valueType": "Any"
        },
        {
            "id": null,
            "name": "value_filter",
            "displayName": "value_filter",
            "defaultValue": "*",
            "sourceDefinition": {
                "variableSourceType": "CsvVariableSourceDefinition",
                "values": "filter_value"
            },
            "allowMultiSelect": false,
            "includeAllOption": true,
            "hideFromUI": false,
            "valueType": "Any"
        },
        {
            "id": null,
            "name": "tier_filter",
            "displayName": "tier_filter",
            "defaultValue": "*",
            "sourceDefinition": {
                "variableSourceType": "CsvVariableSourceDefinition",
                "values": "Continuous,Frequent,Infrequent"
            },
            "allowMultiSelect": false,
            "includeAllOption": true,
            "hideFromUI": false,
            "valueType": "Any"
        },
        {
            "id": null,
            "name": "max_chrs",
            "displayName": "max_chrs",
            "defaultValue": "35",
            "sourceDefinition": {
                "variableSourceType": "CsvVariableSourceDefinition",
                "values": "25,2530,35,45,50"
            },
            "allowMultiSelect": false,
            "includeAllOption": false,
            "hideFromUI": false,
            "valueType": "Any"
        },
        {
            "id": null,
            "name": "graphs_by",
            "displayName": "graphs_by",
            "defaultValue": "credits",
            "sourceDefinition": {
                "variableSourceType": "CsvVariableSourceDefinition",
                "values": "gbytes,credits"
            },
            "allowMultiSelect": false,
            "includeAllOption": false,
            "hideFromUI": false,
            "valueType": "Any"
        }
    ],
    "coloringRules": []
}